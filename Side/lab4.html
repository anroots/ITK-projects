<!doctype html>
<!--[if lt IE 7]>
<html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>
<html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>
<html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">

	<title>Sidevõrgud Labor 4 </title>
	<meta name="author" content="Ando Roots">

	<link rel="stylesheet" href="css/bootstrap.min.css">
</head>
<body>
<div class="container" style="padding-top: 30px;">
<h1>
	Sidevõrgud labor #4
</h1>

<div class="row span8">
<div class="well span3 offset9">
	<p class="help-block">
		08. märts 2012, <a href="http://enos.itcollege.ee/~irokk/vorgud_k12/Labor4.html"
		                   title="Labori juhend">juhend</a>
	</p>

	<p>
		Meeskond:
	</p>
	<ul>
		<li>Ando Roots (D22)</li>
		<li>Mikk Pärast (D22)</li>
	</ul>
</div>
<div class="clearfix"></div>

<h1>Töö käik</h1>

<p>Seadistatakse PBX serverit.</p>

<h4>General settings</h4>
<ol>
	<li>Voicemail -> Ring Time Default = 20sec</li>
	<li>International Settings -> Country Indications: Estonia</li>
	<li>Submit Changes</li>
</ol>

<h3>Kasutajate loomine</h3>

<h4>Extensions</h4>
<ol>
	<li>General Sip -> Submit</li>
	<li>User extension = 1441</li>
	<li>Display name = Ema</li>
	<li>Secret = OlenEma1441</li>
	<li>Voicemail = Enabled</li>
	<li>Voicemail Password = 14411441</li>
	<li>Submit</li>
</ol>
<ol>
	<li>General Sip -> Submit (LinkSys)</li>
	<li>User extension = 1442</li>
	<li>Display name = Isa</li>
	<li>Secret = OlenIsa1442</li>
	<li>Voicemail = Enabled</li>
	<li>Voicemail Password = 14421442</li>
	<li>Submit</li>
</ol>
<ol>
	<li>Generic IAX2 -> Submit</li>
	<li>User extension = 1443</li>
	<li>Display name = Poeg</li>
	<li>Secret = OlenPoeg1443</li>
	<li>Voicemail = Enabled</li>
	<li>Voicemail Password = 14431443</li>
	<li>Submit</li>
</ol>
<ol>
	<li>Generic IAX2 -> Submit</li>
	<li>User extension = 1444</li>
	<li>Display name = Tytar</li>
	<li>Secret = OlenTytar1444</li>
	<li>Voicemail = Enabled</li>
	<li>Voicemail Password = 14441444</li>
	<li>Submit</li>
</ol>

<a class="btn">Apply Configuration Changes</a>

<p>Seadistada kolmes arvutis ZoIPer SIP klient kasutama kolme nendest kontodest. "Isa" konto läheb LinkSys
	telefonile.</p>

<h3>Telefoni seadistus veebiliidesest</h3>

<p>
	Veebiliidese aadress 10.20.30.45 (telefoni on sisseehitatud veebiserver, serveri aadressi leiab telefonist:
	<em>Settings
		-> Network ->Current IP</em>).
	Veebiliidese avanedes klikata Admin lingile lehe päises, edasi Ext 1 vahekaardil.
</p>
<h4>Ext 1 vahekaart</h4>
<ol>
	<li>Proxy = 10.20.30.40</li>
	<li>User ID = 1442</li>
	<li>Password = OlenIsa1442</li>
	<li>Preferred Codec = G711a</li>
</ol>
<a class="btn">Submit All Changes</a>

<h4>
	<em>Regional</em> vahekaart
</h4>
<ol>
	<li>Time Zone GMT +2</li>
	<li>Local Date 03/08</li>
	<li>Local Time 12:36</li>
</ol>
<a class="btn">Submit All Changes</a>

<h4>Phone vahekaart</h4>
<ol>
	<li>Station Name = IsaLaud</li>
	<li>Line Key 2 -> Extension = Disabled</li>
	<li>Line Key 3 -> Extension= Disabled</li>
	<li>Line Key 4 -> Extension= Disabled</li>
</ol>
<a class="btn">Submit All Changes</a>

<p>
	Nüüd on kliendid ja server seadistatud, testides selgub, et ühendus kõikide masinate vahel on olemas.
	Kõneposti
	jäetud teateid saab kuulata, navigeerides FreePBX Recordings vahekaardile (ja logides oma telefoninumbri ja
	kõneposti parooliga sisse): <a
		href="http://10.20.30.40/recordings">http://10.20.30.40/recordings</a>
</p>

<div class="clearfix"></div>

<h3>Numbrikombinatsioonid</h3>

<p>FreePBX menüüpunktist "Feature Codes".</p>

<table class="table table-bordered table-striped table-condensed">
	<thead>
	<tr>
		<th class="span1">Kood</th>
		<th>Tähendus</th>
	</tr>
	</thead>
	<tbody>
	<tr>
		<td>*72</td>
		<td>Kõikide kõnede suunamine</td>
	</tr>
	<tr>
		<td>*65</td>
		<td>Oma telefoninumbri küsimine</td>
	</tr>
	<tr>
		<td>*43</td>
		<td>Kaja test</td>
	</tr>
	<tr>
		<td>*69</td>
		<td>Tagasihelistamine</td>
	</tr>
	<tr>
		<td>*78</td>
		<td>Do-Not-Disturb aktiveerimine</td>
	</tr>
	<tr>
		<td>*79</td>
		<td>Do-Not-Disturb deaktiveerimine</td>
	</tr>
	<tr>
		<td>7777</td>
		<td>Sissetuleva kõne simuleerimine</td>
	</tr>
	</tbody>
</table>

<p>My Voicemail ja Dial Voicemail erinevus on selles, et Dial Voicemail on üldisem ja võimaldab kuulata suvalise
	kasutaja kõneposti (PIN teadmisel). My Voicemail küsib ainult PIN-i, sest kasutajatunnus täidetakse
	automaatselt.</p>

<h3>Konverentsikõned</h3>

<p class="help-block">Conferences menüüpunktist.</p>

<h4>Esimene konverents - 1445</h4>
<ol>
	<li>Conference Number = 1445</li>
	<li>Conference Name = Majandus</li>
	<li>User Count = Yes</li>
	<li>Music on Hold = Yes</li>
	<li>Music on Hold Class = default</li>
</ol>
<a class="btn">Submit Changes</a>
<a class="btn">Apply Configuration Changes</a>

<h4>Teine konverents - 1446</h4>

<ol>
	<li>Conference Number = 1446</li>
	<li>Conference Name = Saladus</li>
	<li>User Count = Yes</li>
	<li>User PIN = 6441</li>
	<li>Admin PIN = 6666</li>
	<li>Leader Wait = Yes</li>
	<li>User Count = Yes</li>
	<li>User join/leave = Yes</li>
	<li>Music on Hold = Yes</li>
	<li>Music on Hold Class = default</li>
</ol>
<a class="btn">Submit Changes</a>
<a class="btn">Apply Configuration Changes</a>

<h2>Grupinumber</h2>

<p>Menüüpunktist <em>Ring Groups</em>.</p>

<ol>
	<li>Ring Group NUmber = 1447</li>
	<li>Group Description = Pere</li>
	<li>Play Music On Hold = default</li>
	<li>Ring Strategy = memoryhunt</li>
	<li>Ring Time = 10</li>
	<li>Extension List = 1441,1442,1443</li>
	<li>CID Name Prefix = Pere</li>
	<li>Destination if No Answer = Voicemail (ema)</li>
</ol>

<a class="btn">Submit Changes</a>
<ol>
	<li>Destination if No Answer = Ring Group (Pere)</li>
</ol>
<a class="btn">Apply Configuration Changes</a>

<h2>Kõnemenüü</h2>

<p>System Recordings menüüpunkt.</p>
<ol>
	<li>extension number for recording messages: 1443</li>
	<li><a class="btn">Go</a></li>
	<li>Sisestada 1443 numbriga telefonilt kood *77 ja salvestada teade.</li>
	<li>Sisestada veebiliideses teate nimi (Tervitus)</li>
	<li><a class="btn">Save</a></li>
</ol>

<p>IVR menüüpunkt</p>

<ol>
	<li>Change Name = Kodu</li>
	<li>Announcement = Tervitus</li>
	<li>Timeout = 20</li>
	<li></li>
</ol>
<h5>Valikud</h5>
<table class="table table-bordered table-striped table-condensed">
	<thead>
	<tr>
		<th>Klahv</th>
		<th>Tegevus</th>
		<th>Parameeter</th>
	</tr>
	</thead>
	<tbody>
	<tr>
		<td>0</td>
		<td>Ring Groups</td>
		<td>Pere</td>
	</tr>
	<tr>
		<td>1</td>
		<td>Extensions</td>
		<td>Ema</td>
	</tr>
	<tr>
		<td>2</td>
		<td>Extensions</td>
		<td>Isa</td>
	</tr>
	<tr>
		<td>3</td>
		<td>Extensions</td>
		<td>Poeg</td>
	</tr>
	<tr>
		<td>4</td>
		<td>Extensions</td>
		<td>Tütar</td>
	</tr>
	<tr>
		<td>5</td>
		<td>Conferences</td>
		<td>Majandus</td>
	</tr>
	<tr>
		<td>6</td>
		<td>Conferences</td>
		<td>Saladus</td>
	</tr>
	<tr>
		<td>t</td>
		<td>Ring Groups</td>
		<td>Pere</td>
	</tr>
	</tbody>
</table>

<ol>
	<li><a class="btn">Save</a></li>
</ol>

<p>Menüüpunkt <em>Inbound Routes</em></p>
<ol>
	<li>Set Destination = IVR (Kodu)</li>
</ol>
<a class="btn">Apply Configuration Changes</a>

<h1>Kahe jaama ühendamine</h1>

<h2>Jaam 2</h2>

<p>Teise jaama IP: 10.20.30.41. Menüüpunkt Extensions</p>
<ol>
	<li>General Sip -> Submit</li>
	<li>User Extension = 2441</li>
	<li>Display Name = Naaber</li>
	<li>SIP Alias = Naaber</li>
	<li>Secret = OlenNaaber2441</li>
</ol>

<p>Menüüpunkt Trunks. Add SIP trunk.</p>

<div class="well">
	<p>
		<a href="static/lab4/sip_config.xls">
			<span class="icon-th-list"></span>
			Laadi alla PBX Trunk seadistusfail
		</a>
	</p>

	<p class="help-block">Selles failis on info kahe PBX serveri ühendamiseks SIP trunk kaudu.</p>
</div>

<a class="btn">Save</a>
<a class="btn">Apply configuration Changes</a>

<p>Menüüpunkt Outbound Routes.</p>

<ol>
	<li>RouteNane = OutTo40</li>
	<li>Trunk Sequence for Matched Routes: = => TeineJaam</li>
	<li>Dial Patterns that will use this route: match pattern = 1XXX</li>
</ol>

<a class="btn">Submit Changes</a>
<a class="btn">Apply configuration Changes</a>


<h1>Jaam 1</h1>

<p>Sama protsess korrata esimeses jaamas. Seaded ülalpool asuvast failist.</p>


<p>Menüüpunkt Outbound Routes.</p>

<ol>
	<li>RouteNane = OutTo41</li>
	<li>Trunk Sequence for Matched Routes: = => EsimeneJaam</li>
	<li>Dial Patterns that will use this route: match pattern = 2XXX</li>
</ol>

<a class="btn">Submit Changes</a>
<a class="btn">Apply configuration Changes</a>

<p>Sisestada SIP klienti kasutaja "Naaber" info teisest (.41) serverist. Kaks süsteemi on nüüd omavahel ühendatud ja
	just sisseloginud "Naaber" saab helistada teistele: "Isa", "Ema"...</p>

<h1>Kõnede logid</h1>

<p>PBX serverist saadud logifailid labori töös toimunud kõnede kohta.</p>

<div class="well">
	<p><a href="static/lab4/call_report.pdf">
		<span class="icon-file"></span> Kõneraport PDF formaadis
	</a>
	</p>

	<p>
		<a href="static/lab4/call_report.csv">
			<span class="icon-file"></span> Kõneraport CSV formaadis
		</a>
	</p>
</div>
<a href="http://www.w3.org/html/logo/">
	<img src="http://www.w3.org/html/logo/badge/html5-badge-h-css3-semantics.png" width="165" height="64"
	     alt="HTML5 Powered with CSS3 / Styling, and Semantics"
	     title="HTML5 Powered with CSS3 / Styling, and Semantics">
</a>

<div style="padding-bottom: 30px;"></div>
</div>
</div>
</body>
</html>